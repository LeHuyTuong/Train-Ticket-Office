<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{fragments/_customer_layout}"> <head>
    <title>Kết Quả Tìm Kiếm</title>
</head>
<body>
<div layout:fragment="content">
    <h2 class="page-title">
        Chuyến: <span th:text="${startStation.name}">Ga Đi</span>
        → <span th:text="${endStation.name}">Ga Đến</span>
    </h2>
    <div th:if="${#lists.isEmpty(availableTrips)}" class="alert alert-warning" role="alert">
        Không tìm thấy chuyến tàu nào phù hợp với tuyến đường của bạn.
    </div>
    <div th:if="${not #lists.isEmpty(availableTrips)}">
        <h4 class="mb-3">Các chuyến tàu có sẵn:</h4>
        <table class="table table-hover">
            <thead>
            <tr>
                <th>Mã Tàu</th>
                <th>Giờ Đi</th>
                <th>Giờ Đến</th>
                <th>Giá Vé (VNĐ)</th>
                <th></th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="trip : ${availableTrips}">
                <td class="align-middle">
                    <strong th:text="${trip.train.code}">SE1</strong>
                </td>
                <td class="align-middle">
                    <span th:text="${#temporals.format(trip.departureTime, 'dd/MM/yyyy')}"></span>
                </td>
                <td class="align-middle">
                    <span th:text="${#temporals.format(trip.arrivalTime, 'dd/MM/yyyy')}"></span>
                </td>
                <td class="align-middle">
                    <strong th:text="${#numbers.formatDecimal(trip.price, 0, 'COMMA', 0, 'POINT')}"></strong>
                </td>
                <td class="text-end">
                    <a th:href="@{/bookings/new(tripId=${trip.tripId})}" class="btn btn-primary">
                        Chọn Ghế & Đặt Vé <i class="bi bi-chevron-right"></i>
                    </a>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
    <a th:href="@{/}" class="btn btn-secondary">Quay lại Tìm kiếm</a>
</div>
</body>
</html>